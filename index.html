<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Futuristic Baseball Workout App</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
body { background: #121212; color: #eee; display: flex; flex-direction: column; min-height: 100vh; }
header { padding: 1rem; background: linear-gradient(90deg,#0f0c29,#302b63,#24243e); text-align: center; font-size: 1.5rem; font-weight: bold; }
nav { display: flex; justify-content: space-around; background: #1f1f1f; padding: 0.5rem 0; }
nav button { background: none; border: none; color: #eee; font-size: 1rem; cursor: pointer; }
nav button.active { color: #00ffcc; font-weight: bold; }
.container { flex: 1; padding: 1rem; overflow-y: auto; }
.hidden { display: none; }
.card { background: linear-gradient(145deg,#1c1c1c,#272727); padding: 1rem; border-radius: 10px; margin-bottom: 1rem; transition: transform 0.5s ease, opacity 0.5s ease; }
.card.completed { opacity: 0.6; transform: scale(0.98); }
.card.suggested { border: 2px solid #00ffcc; box-shadow: 0 0 15px #00ffcc; }
.card h3 { margin-bottom: 0.5rem; color: #00ffcc; }
.card p { font-size: 0.9rem; line-height: 1.4; }
.card button { margin-top: 0.5rem; padding: 0.5rem; background: #00ffcc; border: none; border-radius: 5px; color: #121212; font-weight: bold; cursor: pointer; width: 100%; }
.search-bar { margin-bottom: 1rem; }
.search-bar input { width: 100%; padding: 0.5rem; border-radius: 10px; border: none; outline: none; }
.progress { height: 20px; background: #333; border-radius: 10px; overflow: hidden; margin-bottom: 1rem; }
.progress-bar { height: 100%; background: #00ffcc; width: 0%; transition: width 0.3s; }
.badge { display: inline-block; padding: 0.3rem 0.6rem; background: #00ffcc; color: #121212; border-radius: 5px; margin: 0.2rem; font-size: 0.8rem; }
.card:hover { transform: scale(1.02); }
.stats { display: flex; flex-direction: column; gap: 1rem; }
.stat-card { background: #1f1f1f; padding: 1rem; border-radius: 10px; }
.video-container iframe { border-radius: 10px; }
</style>
</head>
<body>

<header>⚾ Futuristic Baseball Workout App</header>

<nav>
  <button class="active" onclick="showTab('today')">Today</button>
  <button onclick="showTab('library')">Library</button>
  <button onclick="showTab('stats')">Stats</button>
  <button onclick="showTab('settings')">Settings</button>
</nav>

<div class="container">

  <div id="today">
    <div class="progress"><div class="progress-bar" id="todayProgress"></div></div>
    <div id="todayWorkout"></div>
  </div>

  <div id="library" class="hidden">
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search exercises..." oninput="searchExercise()">
    </div>
    <div id="libraryList"></div>
  </div>

  <div id="stats" class="hidden">
    <h3>Progress & Streaks</h3>
    <div class="stats">
      <div class="stat-card"><strong>Workout Streak:</strong> <span id="streak">0</span> days</div>
      <div class="stat-card"><strong>Exercises Completed:</strong> <span id="completedExercises">0</span> / <span id="totalExercises">0</span></div>
      <div class="stat-card"><strong>Badges:</strong> <span id="badges"></span></div>
    </div>
  </div>

  <div id="settings" class="hidden">
    <h3>Settings</h3>
    <button onclick="resetProgress()">Reset Progress</button>
  </div>

</div>

<script>
const workouts = [
  {
    id: 1, name: "Lower Body Strength",
    exercises: [
      { name: "Goblet Squat", sets: 4, reps: 8, description: "Builds leg strength and stability.", video: "https://www.youtube.com/embed/MeIiIdhvXT4" },
      { name: "Bulgarian Split Squat", sets: 3, reps: 10, description: "Targets quads and glutes for sprinting power.", video: "https://www.youtube.com/embed/2C-uNgKwPLE" },
      { name: "Romanian Deadlift", sets: 3, reps: 8, description: "Enhances hamstring and posterior chain strength.", video: "https://www.youtube.com/embed/7j-2w4-P14I" },
      { name: "Step-Up", sets: 3, reps: 12, description: "Improves unilateral leg strength and balance.", video: "https://www.youtube.com/embed/VID-20084661" }
    ]
  },
  { id: 2, name: "Core & Mobility",
    exercises: [
      { name: "Plank", sets: 3, reps: "30 sec", description: "Strengthens the core for better stability.", video: "https://www.youtube.com/embed/ASdvN_XEl_c" },
      { name: "Side Plank", sets: 3, reps: "30 sec each side", description: "Targets obliques and improves lateral stability.", video: "https://www.youtube.com/embed/XeN4pEZZJNI" },
      { name: "Hip Flexor Stretch", sets: 3, reps: "30 sec each side", description: "Increases hip flexibility and mobility.", video: "https://www.youtube.com/embed/zTPfzlZbtz8" },
      { name: "Hamstring Stretch", sets: 3, reps: "30 sec each side", description: "Enhances hamstring flexibility.", video: "https://www.youtube.com/embed/GHb1xKvO3NY" }
    ]
  },
  { id: 3, name: "Speed & Conditioning",
    exercises: [
      { name: "Sled Push", sets: 4, reps: "20 meters", description: "Builds explosive power and acceleration.", video: "https://www.youtube.com/embed/VJ2FvwX6pd4" },
      { name: "Bounding", sets: 3, reps: "20 meters", description: "Improves stride length and power.", video: "https://www.youtube.com/embed/_5xSxkYJj_M" },
      { name: "Ladder Drills", sets: 3, reps: "30 sec", description: "Enhances foot speed and coordination.", video: "https://www.youtube.com/embed/lQ1IPd2ki1k" },
      { name: "Cone Drills", sets: 3, reps: "30 sec", description: "Improves agility and change of direction.", video: "https://www.youtube.com/embed/CVgKbk7Kqx8" }
    ]
  }
];

let completed = JSON.parse(localStorage.getItem('completed')) || [];
let streak = JSON.parse(localStorage.getItem('streak')) || 0;

function showTab(tab) {
  document.querySelectorAll('.container > div').forEach(d => d.classList.add('hidden'));
  document.getElementById(tab).classList.remove('hidden');
  document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
  document.querySelector(`nav button[onclick="showTab('${tab}')"]`).classList.add('active');
}

function saveProgress() {
  localStorage.setItem('completed', JSON.stringify(completed));
  localStorage.setItem('streak', streak);
}

function toggleComplete(name) {
  if(!completed.includes(name)) completed.push(name);
  else completed = completed.filter(e => e !== name);
  saveProgress();
  generateTodayWorkout();
  renderLibrary();
  updateStats();
}

function updateProgress() {
  const todayIndex = new Date().getDay() % workouts.length;
  const today = workouts[todayIndex];
  const done = today.exercises.filter(ex => completed.includes(ex.name)).length;
  const percent = (done / today.exercises.length) * 100;
  document.getElementById('todayProgress').style.width = percent + '%';
}

function updateStats() {
  document.getElementById('streak').innerText = streak;
  const totalEx = workouts.reduce((sum, w) => sum + w.exercises.length, 0);
  document.getElementById('totalExercises').innerText = totalEx;
  document.getElementById('completedExercises').innerText = completed.length;
  document.getElementById('badges').innerHTML = completed.length > 0 ? `<span class="badge">Workout Warrior</span>` : '';
}

function resetProgress() {
  if(confirm("Reset all progress?")) {
    completed = [];
    streak = 0;
    saveProgress();
    generateTodayWorkout();
    renderLibrary();
    updateStats();
  }
}

function adjustDifficulty(exercise) {
  if(streak >= 3 && typeof exercise.reps === "number") {
    return { ...exercise, sets: exercise.sets + 1, reps: exercise.reps + 1 };
  }
  return exercise;
}

function generateTodayWorkout() {
  const todayIndex = new Date().getDay() % workouts.length;
  const today = workouts[todayIndex];
  const container = document.getElementById('todayWorkout');
  container.innerHTML = '';
  
  // AI Suggestion: pick first two not completed exercises
  const suggested = today.exercises.filter(ex => !completed.includes(ex.name)).slice(0,2);

  today.exercises.forEach(ex => {
    const exAdjusted = adjustDifficulty(ex);
    const card = document.createElement('div');
    card.className = 'card' + (completed.includes(ex.name) ? ' completed' : '') + (suggested.includes(ex) ? ' suggested' : '');
    card.innerHTML = `
      <h3>${exAdjusted.name}</h3>
      <p>${exAdjusted.description}</p>
      <p><strong>Sets:</strong> ${exAdjusted.sets} | <strong>Reps:</strong> ${exAdjusted.reps}</p>
      <div class="video-container">
        <iframe width="100%" height="200" src="${exAdjusted.video}" frameborder="0" allowfullscreen></iframe>
      </div>
      <button onclick="toggleComplete('${exAdjusted.name}')">${completed.includes(exAdjusted.name) ? 'Undo Complete' : 'Mark Complete'}</button>
    `;
    container.appendChild(card);
  });
  updateProgress();
}

/* Library Rendering and Search */
function renderLibrary() {
  const container = document.getElementById('libraryList');
  container.innerHTML = '';
  workouts.forEach(w => w.exercises.forEach(ex => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <h3>${ex.name}</h3>
      <p>${ex.description}</p>
      <p><strong>Sets:</strong> ${ex.sets} | <strong>Reps:</strong> ${ex.reps}</p>
      <div class="video-container">
        <iframe width="100%" height="200" src="${ex.video}" frameborder="0" allowfullscreen></iframe>
      </div>
      <button onclick="toggleComplete('${ex.name}')">${completed.includes(ex.name) ? 'Undo Complete' : 'Mark Complete'}</button>
    `;
    container.appendChild(card);
  }));
}

function searchExercise() {
  const query = document.getElementById('searchInput').value.toLowerCase();
  document.querySelectorAll('#libraryList .card').forEach(card => {
    const name = card.querySelector('h3').innerText.toLowerCase();
    card.style.display = name.includes(query) ? 'block' : 'none';
  });
}

/* Daily Push Notification */
function dailyNotification() {
  if("Notification" in window) {
    Notification.requestPermission().then(permission => {
      if(permission === "granted") {
        new Notification("⚾ Time for your baseball workout!");
      }
    });
  }
}

/* --- Initialize --- */
generateTodayWorkout();
renderLibrary();
updateStats();
dailyNotification();
</script>
</body>
</html>
